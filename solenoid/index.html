<!DOCTYPE html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><title>Ethereum Transaction Debugger</title><style>*{box-sizing:border-box}body{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-width:640px;max-width:1400px;min-height:100vh;margin:0 auto;padding:24px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif}.container{backdrop-filter:blur(10px);background-color:#fff;border-radius:12px;margin-bottom:20px;padding:24px;box-shadow:0 8px 32px #0000001f}h1{color:#1a1a1a;letter-spacing:-.5px;margin:0;font-size:24px;font-weight:700}h2{color:#1a1a1a;margin:0 0 16px;font-size:20px;font-weight:600}.subtitle{color:#666;margin-bottom:20px;font-size:14px}.header-compact{flex-wrap:nowrap;align-items:center;gap:6px;margin-bottom:8px;padding-bottom:2px;display:flex;overflow-x:auto}.rpc-toggle{font-weight:500;transition:all .2s}.rpc-toggle:hover{transform:translateY(-1px);box-shadow:0 4px 8px #7575754d;background-color:#616161!important}.form-group{margin-bottom:15px}label{color:#333;margin-bottom:5px;font-weight:500;display:block}input{background-color:#fafafa;border:2px solid #e0e0e0;border-radius:6px;width:100%;padding:10px 12px;font-size:14px;transition:all .2s}input:focus{background-color:#fff;border-color:#2196f3;outline:none;box-shadow:0 0 0 3px #2196f31a}.button-group{gap:10px;margin-top:10px;display:flex}button{color:#fff;cursor:pointer;background-color:#4caf50;border:none;border-radius:6px;padding:10px 20px;font-size:14px;font-weight:500;transition:all .2s;box-shadow:0 2px 4px #4caf5033}button:hover{background-color:#45a049;transform:translateY(-1px);box-shadow:0 4px 8px #4caf504d}button:active{transform:translateY(0)}button:disabled{cursor:not-allowed;box-shadow:none;background-color:#ccc;transform:none}button.secondary{background-color:#2196f3;box-shadow:0 2px 4px #2196f333}button.secondary:hover{background-color:#1976d2;box-shadow:0 4px 8px #2196f34d}button.secondary:disabled{cursor:not-allowed;box-shadow:none;background-color:#ccc;transform:none}.status{white-space:pre-wrap;word-wrap:break-word;background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);border-left:4px solid #4caf50;border-radius:8px;margin-top:16px;padding:16px;font-family:SF Mono,Monaco,Courier New,monospace;font-size:13px;line-height:1.6;box-shadow:0 2px 8px #0000000d}.status.error{color:#c62828;background:linear-gradient(135deg,#ffebee 0%,#ffcdd2 100%);border-left-color:#f44336}.status.loading{color:#1565c0;background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);border-left-color:#2196f3}.call-stack{margin-top:20px}.call-stack-item{background:linear-gradient(135deg,#fff 0%,#f8f9fa 100%);border-left:4px solid #2196f3;border-radius:6px;margin-bottom:3px;padding:10px 12px;font-family:SF Mono,Monaco,Courier New,monospace;font-size:12px;line-height:1.5;transition:all .2s;box-shadow:0 1px 3px #00000014}.call-stack-item:hover{transform:translate(2px);box-shadow:0 2px 6px #0000001f}.call-stack-item.call{background:linear-gradient(135deg,#f1f8f4 0%,#e8f5e9 100%);border-left-color:#4caf50}.call-stack-item.return{background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);border-left-color:#2196f3}.call-stack-item.revert{background:linear-gradient(135deg,#ffebee 0%,#ffcdd2 100%);border-left-color:#f44336}.call-stack-item.halt{background:#fff;border-left-color:#000}.call-stack-item.transfer{background:#fffde7;border-left-color:#fdd835}.call-stack-item .depth{color:#666;width:30px;font-weight:700;display:inline-block}.call-stack-item .type{text-transform:uppercase;letter-spacing:.5px;border-radius:4px;margin-right:12px;padding:4px 10px;font-size:10px;font-weight:700;display:inline-block;box-shadow:0 1px 3px #0003}.call-stack-item .type.call{color:#fff;background:linear-gradient(135deg,#4caf50 0%,#45a049 100%)}.call-stack-item .type.return{color:#fff;background:linear-gradient(135deg,#2196f3 0%,#1976d2 100%)}.call-stack-item .type.revert{color:#fff;background:linear-gradient(135deg,#f44336 0%,#d32f2f 100%)}.call-stack-item .type.halt{color:#fff;background:#000}.call-stack-item .type.transfer{color:#f57f17;background:#fdd835;font-weight:700}.call-stack-item .address{color:#2196f3;font-weight:700}.call-stack-item .details{color:#666;margin-top:8px;font-size:12px}.call-stack-item .value{color:#4caf50}.call-stack-item .gas{color:#666}</style><body>
    <div class=container>
        <div class=header-compact>
            <h1 style=white-space:nowrap;margin:0>Solenoid EVM</h1>
            <div style=flex-wrap:nowrap;flex:1;justify-content:flex-end;align-items:center;gap:6px;display:flex>
                <label for=blockNumber style=white-space:nowrap;margin:0;font-size:14px>Block:</label>
                <input type=number id=blockNumber placeholder=20000000 style="border:1px solid #ddd;border-radius:4px;width:120px;padding:8px;font-size:14px">
                <label for=txIndex style=white-space:nowrap;margin:0;font-size:14px>Tx Index:</label>
                <input type=number id=txIndex placeholder=0 value=0 style="border:1px solid #ddd;border-radius:4px;width:120px;padding:8px;font-size:14px">
                <button id=traceButton type=button style="white-space:nowrap;margin:0;padding:8px 16px">Trace Transaction</button>
                <button id=randomButton type=button class=secondary style="white-space:nowrap;margin:0;padding:8px 16px">Select Random</button>
                <button id=rpcToggleButton type=button class=rpc-toggle style="color:#fff;cursor:pointer;white-space:nowrap;background-color:#757575;border:none;border-radius:4px;padding:8px 16px;font-size:14px;font-weight:500">RPC URL</button>
            </div>
        </div>
        <div id=rpcUrlContainer style=margin-top:6px;display:none>
            <input id=rpcUrl placeholder=https://ethereum-rpc.publicnode.com value=https://ethereum-rpc.publicnode.com style="box-sizing:border-box;background-color:#fafafa;border:2px solid #e0e0e0;border-radius:8px;width:100%;padding:12px 16px;font-family:SF Mono,Monaco,Courier New,monospace;font-size:14px;transition:all .2s">
        </div>

        <div id=status class=status style=display:none></div>
    </div>

    <div class=container>
        <h2>Call Stack</h2>
        <div id=txHashDisplay style="background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);border:1px solid #2196f333;border-radius:8px;margin-bottom:12px;padding:12px 16px;font-family:SF Mono,Monaco,Courier New,monospace;font-size:13px;display:none;box-shadow:0 2px 8px #2196f326"></div>
        <div id=callStack class=call-stack></div>
    </div>

    <script type=module>let e;var t,n=globalThis,o={},a={},r=n.parcelRequire94c2;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},n.parcelRequire94c2=r),r.register;let l=null;function i(){return(null===l||0===l.byteLength)&&(l=new Uint8Array(e.memory.buffer)),l}let s=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});s.decode();let c=0;function d(e,t){var n;return e>>>=0,n=e,(c+=t)>=0x7ff00000&&((s=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0})).decode(),c=t),s.decode(i().subarray(n,n+t))}function u(t){let n=e.__externref_table_alloc();return e.__wbindgen_export_2.set(n,t),n}function g(t,n){try{return t.apply(this,n)}catch(n){let t=u(n);e.__wbindgen_exn_store(t)}}function f(e,t){return e>>>=0,i().subarray(e/1,e/1+t)}let b=0,_=new TextEncoder;function p(e,t,n){if(void 0===n){let n=_.encode(e),o=t(n.length,1)>>>0;return i().subarray(o,o+n.length).set(n),b=n.length,o}let o=e.length,a=t(o,1)>>>0,r=i(),l=0;for(;l<o;l++){let t=e.charCodeAt(l);if(t>127)break;r[a+l]=t}if(l!==o){0!==l&&(e=e.slice(l)),a=n(a,o,o=l+3*e.length,1)>>>0;let t=i().subarray(a+l,a+o);l+=_.encodeInto(e,t).written,a=n(a,o,l,1)>>>0}return b=l,a}"encodeInto"in _||(_.encodeInto=function(e,t){let n=_.encode(e);return t.set(n),{read:e.length,written:n.length}});let w=null;function y(){return(null===w||!0===w.buffer.detached||void 0===w.buffer.detached&&w.buffer!==e.memory.buffer)&&(w=new DataView(e.memory.buffer)),w}function m(e){return null==e}let h="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>{e.__wbindgen_export_7.get(t.dtor)(t.a,t.b)});function x(t,n,o,a){let r={a:t,b:n,cnt:1,dtor:o},l=(...t)=>{r.cnt++;let n=r.a;r.a=0;try{return a(n,r.b,...t)}finally{0==--r.cnt?(e.__wbindgen_export_7.get(r.dtor)(n,r.b),h.unregister(r)):r.a=n}};return l.original=r,h.register(l,r,r),l}function v(t,n,o){let a=p(t,e.__wbindgen_malloc,e.__wbindgen_realloc),r=b,l=p(n,e.__wbindgen_malloc,e.__wbindgen_realloc),i=b,s=p(o,e.__wbindgen_malloc,e.__wbindgen_realloc),c=b;return e.get_transaction_hash(a,r,l,i,s,c)}function k(t,n,o){e.closure357_externref_shim(t,n,o)}function $(t,n){e.wasm_bindgen__convert__closures_____invoke__h38fa4ffc6b7faf58(t,n)}let S=["default","no-store","reload","no-cache","force-cache","only-if-cached"],E=["omit","same-origin","include"],T=["same-origin","no-cors","cors","navigate"],I=new Set(["basic","cors","default"]);async function A(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(e.ok&&I.has(e.type)&&"application/wasm"!==e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}var B={};async function C(t){let o;if(void 0!==e)return e;void 0!==t&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===t&&(t=new URL(B));let a=((o={}).wbg={},o.wbg.__wbg_abort_67e1b49bf6614565=function(e){e.abort()},o.wbg.__wbg_abort_d830bf2e9aa6ec5b=function(e,t){e.abort(t)},o.wbg.__wbg_append_72a3c0addd2bce38=function(){return g(function(e,t,n,o,a){e.append(d(t,n),d(o,a))},arguments)},o.wbg.__wbg_arrayBuffer_9c99b8e2809e8cbb=function(){return g(function(e){return e.arrayBuffer()},arguments)},o.wbg.__wbg_call_13410aac570ffff7=function(){return g(function(e,t){return e.call(t)},arguments)},o.wbg.__wbg_call_a5400b25a865cfd8=function(){return g(function(e,t,n){return e.call(t,n)},arguments)},o.wbg.__wbg_clearTimeout_7a42b49784aea641=function(e){return clearTimeout(e)},o.wbg.__wbg_done_75ed0ee6dd243d9d=function(e){return e.done},o.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let o,a;try{o=t,a=n,console.error(d(t,n))}finally{e.__wbindgen_free(o,a,1)}},o.wbg.__wbg_fetch_74a3e84ebd2c9a0e=function(e){return fetch(e)},o.wbg.__wbg_fetch_87aed7f306ec6d63=function(e,t){return e.fetch(t)},o.wbg.__wbg_get_458e874b43b18b25=function(){return g(function(e,t){return Reflect.get(e,t)},arguments)},o.wbg.__wbg_has_b89e451f638123e3=function(){return g(function(e,t){return Reflect.has(e,t)},arguments)},o.wbg.__wbg_headers_29fec3c72865cd75=function(e){return e.headers},o.wbg.__wbg_instanceof_Response_50fde2cd696850bf=function(e){let t;try{t=e instanceof Response}catch(e){t=!1}return t},o.wbg.__wbg_iterator_f370b34483c71a1c=function(){return Symbol.iterator},o.wbg.__wbg_length_6bb7e81f9d7713e4=function(e){return e.length},o.wbg.__wbg_log_6c7b5f4f00b8ce3f=function(e){console.log(e)},o.wbg.__wbg_new_19c25a3f2fa63a02=function(){return{}},o.wbg.__wbg_new_2e3c58a15f39f5f9=function(t,n){try{var o={a:t,b:n};return new Promise((t,n)=>{let a=o.a;o.a=0;try{var r;return r=o.b,void e.closure459_externref_shim(a,r,t,n)}finally{o.a=a}})}finally{o.a=o.b=0}},o.wbg.__wbg_new_638ebfaedbf32a5e=function(e){return new Uint8Array(e)},o.wbg.__wbg_new_66b9434b4e59b63e=function(){return g(function(){return new AbortController},arguments)},o.wbg.__wbg_new_8a6f238a6ece86ea=function(){return Error()},o.wbg.__wbg_new_f6e53210afea8e45=function(){return g(function(){return new Headers},arguments)},o.wbg.__wbg_newfromslice_074c56947bd43469=function(e,t){return new Uint8Array(f(e,t))},o.wbg.__wbg_newnoargs_254190557c45b4ec=function(e,t){return Function(d(e,t))},o.wbg.__wbg_newwithstrandinit_b5d168a29a3fd85f=function(){return g(function(e,t,n){return new Request(d(e,t),n)},arguments)},o.wbg.__wbg_next_5b3530e612fde77d=function(e){return e.next},o.wbg.__wbg_next_692e82279131b03c=function(){return g(function(e){return e.next()},arguments)},o.wbg.__wbg_prototypesetcall_3d4a26c1ed734349=function(e,t,n){Uint8Array.prototype.set.call(f(e,t),n)},o.wbg.__wbg_queueMicrotask_25d0739ac89e8c88=function(e){queueMicrotask(e)},o.wbg.__wbg_queueMicrotask_4488407636f5bf24=function(e){return e.queueMicrotask},o.wbg.__wbg_resolve_4055c623acdd6a1b=function(e){return Promise.resolve(e)},o.wbg.__wbg_setTimeout_7bb3429662ab1e70=function(e,t){return setTimeout(e,t)},o.wbg.__wbg_setbody_c8460bdf44147df8=function(e,t){e.body=t},o.wbg.__wbg_setcache_90ca4ad8a8ad40d3=function(e,t){e.cache=S[t]},o.wbg.__wbg_setcredentials_9cd60d632c9d5dfc=function(e,t){e.credentials=E[t]},o.wbg.__wbg_setheaders_0052283e2f3503d1=function(e,t){e.headers=t},o.wbg.__wbg_setmethod_9b504d5b855b329c=function(e,t,n){e.method=d(t,n)},o.wbg.__wbg_setmode_a23e1a2ad8b512f8=function(e,t){e.mode=T[t]},o.wbg.__wbg_setsignal_8c45ad1247a74809=function(e,t){e.signal=t},o.wbg.__wbg_signal_da4d466ce86118b5=function(e){return e.signal},o.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){let o=p(n.stack,e.__wbindgen_malloc,e.__wbindgen_realloc),a=b;y().setInt32(t+4,a,!0),y().setInt32(t+0,o,!0)},o.wbg.__wbg_static_accessor_GLOBAL_8921f820c2ce3f12=function(){let e=void 0===n?null:n;return m(e)?0:u(e)},o.wbg.__wbg_static_accessor_GLOBAL_THIS_f0a4409105898184=function(){let e="undefined"==typeof globalThis?null:globalThis;return m(e)?0:u(e)},o.wbg.__wbg_static_accessor_SELF_995b214ae681ff99=function(){let e="undefined"==typeof self?null:self;return m(e)?0:u(e)},o.wbg.__wbg_static_accessor_WINDOW_cde3890479c675ea=function(){let e="undefined"==typeof window?null:window;return m(e)?0:u(e)},o.wbg.__wbg_status_3fea3036088621d6=function(e){return e.status},o.wbg.__wbg_stringify_b98c93d0a190446a=function(){return g(function(e){return JSON.stringify(e)},arguments)},o.wbg.__wbg_then_b33a773d723afa3e=function(e,t,n){return e.then(t,n)},o.wbg.__wbg_then_e22500defe16819f=function(e,t){return e.then(t)},o.wbg.__wbg_url_e5720dfacf77b05e=function(t,n){let o=p(n.url,e.__wbindgen_malloc,e.__wbindgen_realloc),a=b;y().setInt32(t+4,a,!0),y().setInt32(t+0,o,!0)},o.wbg.__wbg_value_dd9372230531eade=function(e){return e.value},o.wbg.__wbg_wbindgencbdrop_eb10308566512b88=function(e){let t=e.original;return 1==t.cnt--&&(t.a=0,!0)},o.wbg.__wbg_wbindgendebugstring_99ef257a3ddda34d=function(t,n){let o=p(function e(t){let n,o=typeof t;if("number"==o||"boolean"==o||null==t)return`${t}`;if("string"==o)return`"${t}"`;if("symbol"==o){let e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==o){let e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){let n=t.length,o="[";n>0&&(o+=e(t[0]));for(let a=1;a<n;a++)o+=", "+e(t[a]);return o+"]"}let a=/\[object ([^\]]+)\]/.exec(toString.call(t));if(!a||!(a.length>1))return toString.call(t);if("Object"==(n=a[1]))try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:n}(n),e.__wbindgen_malloc,e.__wbindgen_realloc),a=b;y().setInt32(t+4,a,!0),y().setInt32(t+0,o,!0)},o.wbg.__wbg_wbindgenisfunction_8cee7dce3725ae74=function(e){return"function"==typeof e},o.wbg.__wbg_wbindgenisobject_307a53c6bd97fbf8=function(e){return"object"==typeof e&&null!==e},o.wbg.__wbg_wbindgenisundefined_c4b71d073b92f3c5=function(e){return void 0===e},o.wbg.__wbg_wbindgenstringget_0f16a6ddddef376f=function(t,n){let o="string"==typeof n?n:void 0;var a=m(o)?0:p(o,e.__wbindgen_malloc,e.__wbindgen_realloc),r=b;y().setInt32(t+4,r,!0),y().setInt32(t+0,a,!0)},o.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(e,t){throw Error(d(e,t))},o.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,t){return d(e,t)},o.wbg.__wbindgen_cast_25a0a844437d0e92=function(t,n){var o=(function(t,n){t>>>=0;let o=y(),a=[];for(let r=t;r<t+4*n;r+=4)a.push(e.__wbindgen_export_2.get(o.getUint32(r,!0)));return e.__externref_drop_slice(t,n),a})(t,n).slice();return e.__wbindgen_free(t,4*n,4),o},o.wbg.__wbindgen_cast_711d7deea8fc39ca=function(e,t){return x(e,t,356,k)},o.wbg.__wbindgen_cast_9c29948836c05064=function(e,t){return x(e,t,328,$)},o.wbg.__wbindgen_init_externref_table=function(){let t=e.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},o);("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));let{instance:r,module:i}=await A(await t,a);return e=r.exports,C.__wbindgen_wasm_module=i,w=null,l=null,e.__wbindgen_start(),e}t="wasm_demo_bg.417fe91a.wasm",t=r.i?.[t]||t,B=import.meta.resolve("./"+t);let R=!1,N=[],L=[],H={},D={},M=null,O=null,F=null,U=null,P=null;async function W(){R||(await C(),R=!0,console.log("WASM initialized successfully"))}function G(e){if(!e)return"N/A";let t=e.toString();t.startsWith("0x")||(t="0x"+t),t.length<42&&(t="0x"+t.slice(2).padStart(40,"0"));let n=`https://etherscan.io/address/${t}`;return`<a href="${n}" target="_blank" style="color: #2196F3; text-decoration: none; font-family: monospace;" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">${t}</a>`}function z(e){if(!e)return"0x0";let t=e.toString();return t.startsWith("0x")||(t="0x"+t),t.length<66&&(t="0x"+t.slice(2).padStart(64,"0")),t}function V(e){if(!e)return"0";let t=e.toString();if(t.startsWith("0x")){let e=BigInt(t);return 0n===e?"0 ETH":(Number(e)/1e18).toFixed(6)+" ETH"}return e}function q(e){if(!e)return"";let t=e.toString();t.startsWith("0x")||(t="0x"+t),t.length<66&&(t="0x"+t.slice(2).padStart(64,"0"));let n=`https://etherscan.io/tx/${t}`;return`<a href="${n}" target="_blank" style="color: #2196F3; text-decoration: none; font-weight: bold; font-family: monospace;" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">${t}</a>`}function j(){let e=document.getElementById("callStack"),t=document.getElementById("txHashDisplay");if(console.log("renderCallStack - txHash:",M,"txHashContainer:",t),t)if(M){console.log("Displaying tx hash:",M),t.style.display="block";let e=q(M);console.log("Hash HTML:",e);let n=`<strong>TX:</strong> ${e}`;if(O||null!==F){if(n+="<br>",O){let e="succeeded"===O?"#4CAF50":"#f44336";n+=`<span style="margin-top: 4px; display: inline-block;"><strong>Status:</strong> <span style="color: ${e}; font-weight: 600;">${"succeeded"===O?"Succeeded":"Reverted"}</span></span>`}null!==F&&(n+=`<span style="margin-left: 12px; margin-top: 4px; display: inline-block;"><strong>Gas Used:</strong> <span style="font-family: monospace;">${F.toLocaleString()}</span></span>`)}P&&(n+=`<br><strong>Gas:</strong> ${P.gas_use} | ${P.gas_max}<br><strong>Fee:</strong> ${V(P.gas_fee)}`),t.innerHTML=n}else console.log("No tx hash, hiding container"),t.style.display="none";else console.error("txHashContainer element not found!");e&&(e.innerHTML="",N.forEach((t,n)=>{let o=document.createElement("div");o.className=`call-stack-item ${t.type}`,o.setAttribute("data-depth",t.depth),o.style.marginLeft=`${20*t.depth}px`;let a=`<span class="type ${t.type}">${"transfer"===t.type?"BALANCE":t.type.toUpperCase()}</span>`;if("call"===t.type&&t.data.Call){let e=t.data.Call;if(a+=` <span class="address">${G(e.to)}</span></div><div class="details" style="margin-top: 4px; margin-left: 20px; font-size: 11px; color: #666; line-height: 1.6;"><div style="margin-bottom: 2px;"><strong>FROM:</strong> ${G(e.from)}</div>`,e.value&&"0"!==e.value&&"0x0"!==e.value?a+=`<div style="margin-bottom: 2px;"><strong>VALUE:</strong> <span class="value">${V(e.value)}</span></div>`:a+='<div style="margin-bottom: 2px;"><strong>VALUE:</strong> 0 ETH</div>',e.gas){let t=e.gas.toString(),n=t.startsWith("0x")?BigInt(t).toString():t;a+=`<div style="margin-bottom: 2px;"><strong>GAS:</strong> <span class="gas">${n}</span></div>`}if(e.type){let t=e.type.toString(),n=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();a+=`<div style="margin-bottom: 2px;"><strong>TYPE:</strong> ${n}</div>`}if(e.data){let t=e.data.toString();t.startsWith("0x")||(t="0x"+t);let o=t.length-2,r=D[n]||!1;a+=`<div style="margin-bottom: 2px;"><button class="toggle-data-btn" data-index="${n}" style="background-color: #757575; color: white; padding: 4px 8px; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 500; margin-bottom: 4px;">${r?"Hide":"Show"} DATA (${o})</button><div id="data-${n}" style="word-break: break-all; overflow-wrap: break-word; ${r?"":"display: none;"}"><strong>DATA:</strong> <span style="font-family: monospace; color: #666;">${t}</span></div></div>`}a+="</div>";let o=-1;for(let e=n+1;e<N.length;e++){let n=N[e];if(("return"===n.type||"revert"===n.type)&&n.depth===t.depth){o=e;break}if("call"===n.type&&n.depth<=t.depth)break}let r=L.filter(e=>e.index>n&&(-1===o||e.index<o)&&e.depth>=t.depth);if(r.length>0){let e=H[n]||!1;a+=`<div style="margin-top: 6px; margin-left: 20px;"><button class="toggle-state-btn" data-index="${n}" style="background-color: #757575; color: white; padding: 4px 8px; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 500; margin-bottom: 4px;">${e?"Hide":"Show"} State (${r.length})</button><div id="state-changes-${n}" style="margin-top: 3px; font-size: 11px; color: #666; line-height: 1.3; word-break: break-all; overflow-wrap: break-word; ${e?"":"display: none;"}">`,r.forEach(e=>{if(e.data.Put){let t=e.data.Put;a+=`  <span style="color: #4CAF50;">PUT</span> ${G(t.address)}<span style="word-break: break-all;">[</span><span style="font-family: monospace;">${z(t.key)}</span>] <span style="color: #999; font-family: monospace;">${z(t.val)}</span> \u{2192} <span style="color: #2196F3; font-family: monospace;">${z(t.new)}</span><br>`}else if(e.data.Get){let t=e.data.Get;a+=`  <span style="color: #888;">GET</span> ${G(t.address)}<span style="word-break: break-all;">[</span><span style="font-family: monospace;">${z(t.key)}</span>] = <span style="color: #999; font-family: monospace;">${z(t.val)}</span><br>`}}),a+="</div></div>"}}else if("return"===t.type&&t.data.Return){let e=t.data.Return;if(a+=` <span style="color: ${e.ok?"#4CAF50":"#f44336"}">${e.ok?"OK":"FAILED"}</span></div><div class="details" style="margin-top: 4px; margin-left: 20px; font-size: 11px; color: #666; line-height: 1.6;">`,void 0!==e.gas_used&&(a+=`<div style="margin-bottom: 2px;"><strong>GAS:</strong> <span class="gas">${e.gas_used}</span></div>`),e.data){let t=e.data.toString();t.startsWith("0x")||(t="0x"+t);let o=t.length-2,r=D[n]||!1;a+=`<div style="margin-bottom: 2px;"><button class="toggle-data-btn" data-index="${n}" style="background-color: #757575; color: white; padding: 4px 8px; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 500; margin-bottom: 4px;">${r?"Hide":"Show"} DATA (${o})</button><div id="data-${n}" style="word-break: break-all; overflow-wrap: break-word; ${r?"":"display: none;"}"><strong>DATA:</strong> <span style="font-family: monospace; color: #666;">${t}</span></div></div>`}a+="</div>"}else if("revert"===t.type&&t.data.Return){let e=t.data.Return;if(a+=' <span style="color: #f44336">REVERT</span></div><div class="details" style="margin-top: 4px; margin-left: 20px; font-size: 11px; color: #666; line-height: 1.6;">',void 0!==e.gas_used&&(a+=`<div style="margin-bottom: 2px;"><strong>GAS:</strong> <span class="gas">${e.gas_used}</span></div>`),e.data){let t=e.data.toString();t.startsWith("0x")||(t="0x"+t);let o=t.length-2,r=D[n]||!1;a+=`<div style="margin-bottom: 2px;"><button class="toggle-data-btn" data-index="${n}" style="background-color: #757575; color: white; padding: 4px 8px; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 500; margin-bottom: 4px;">${r?"Hide":"Show"} DATA (${o})</button><div id="data-${n}" style="word-break: break-all; overflow-wrap: break-word; ${r?"":"display: none;"}"><strong>DATA:</strong> <span style="font-family: monospace; color: #666;">${t}</span></div></div>`}e.error&&(a+=`<div style="margin-bottom: 2px;"><strong>ERROR:</strong> <span style="color: #f44336;">${e.error}</span></div>`),a+="</div>"}else if("transfer"===t.type&&t.data.from&&t.data.to&&t.data.value){let e=t.data,n=V(e.value);a+=` <span class="address">${G(e.from)}</span> \u{2192} <span class="address">${G(e.to)}</span> <span class="value" style="color: #f57f17; font-weight: 600;">${n}</span></div>`}else if("halt"===t.type&&t.data.reason){let e=t.data.reason;a+=` <span style="color: #333;">${e}</span></div>`}else if("state"===t.type&&t.data.State){let e=t.data.State;if(e.Put){let t=e.Put;a=`<span style="word-break: break-all; overflow-wrap: break-word;"><span style="color: #666; font-size: 11px;">  </span><span style="color: #4CAF50;">PUT</span> <span style="word-break: break-all; overflow-wrap: break-word;">${G(t.address)}<span style="word-break: break-all;">[</span>${z(t.key)}]</span> <span style="color: #999;">${z(t.val)}</span> \u{2192} <span style="color: #2196F3;">${z(t.new)}</span></span>`}else if(e.Get){let t=e.Get;a=`<span style="word-break: break-all; overflow-wrap: break-word;"><span style="color: #666; font-size: 11px;">  </span><span style="color: #666;">GET</span> <span style="word-break: break-all; overflow-wrap: break-word;">${G(t.address)}<span style="word-break: break-all;">[</span>${z(t.key)}]</span> = <span style="color: #999;">${z(t.val)}</span></span>`}}o.innerHTML=a,e.appendChild(o)}),e.querySelectorAll(".toggle-data-btn").forEach(e=>{e.addEventListener("click",function(){toggleDataVisibility(parseInt(this.getAttribute("data-index")))})}),e.querySelectorAll(".toggle-state-btn").forEach(e=>{e.addEventListener("click",function(){toggleStateVisibility(parseInt(this.getAttribute("data-index")))})}))}window.toggleStateVisibility=function(e){H[e]=!H[e];let t=document.getElementById(`state-changes-${e}`),n=t?.previousElementSibling;if(t&&n){t.style.display=H[e]?"":"none";let o=n.textContent.match(/\((\d+)\)/),a=o?o[1]:"0";n.textContent=`${H[e]?"Hide":"Show"} State (${a})`}},window.toggleDataVisibility=function(e){D[e]=!D[e];let t=document.getElementById(`data-${e}`),n=t?.previousElementSibling;if(t&&n){t.style.display=D[e]?"":"none";let o=n.textContent.match(/\((\d+)\)/),a=o?o[1]:"0";n.textContent=D[e]?`Hide DATA (${a})`:`Show DATA (${a})`}},window.traceTransaction=async function(){let t=document.getElementById("rpcUrl").value,n=document.getElementById("blockNumber").value,o=document.getElementById("txIndex").value,a=document.getElementById("status"),r=document.getElementById("traceButton");if(!t){a.className="status error",a.textContent="Please enter an RPC URL",a.style.display="block";return}if(!n){a.className="status error",a.textContent="Please enter a block number",a.style.display="block";return}if(""===o){a.className="status error",a.textContent="Please enter a transaction index",a.style.display="block";return}try{var l;let i,s,c,d,u,g;r.disabled=!0;let f=document.getElementById("randomButton"),_=document.getElementById("rpcToggleButton");f&&(f.disabled=!0),_&&(_.disabled=!0),a.className="status loading",a.textContent=`Tracing transaction at block ${n}, index ${o}...`,a.style.display="block",N=[],L=[],H={},D={},M=null,O=null,F=null,U=null,P=null;let w=document.getElementById("callStack"),y=document.getElementById("txHashDisplay");w&&(w.innerHTML=""),y&&(y.style.display="none"),await W();let m=String(Math.floor(Number(n))),h=String(Math.floor(Number(o)));if(isNaN(Number(n))||isNaN(Number(o)))throw Error("Invalid block number or transaction index");let x=!0;if(M)try{let e=await v(t,m,h);M===e&&(x=!1)}catch(e){console.warn("Could not verify existing hash, will update:",e)}if(x)try{M=await v(t,m,h);let e=document.getElementById("txHashDisplay");e&&M&&(e.style.display="block",e.innerHTML=`<strong>TX:</strong> ${q(M)}`)}catch(e){console.warn("Could not fetch transaction hash early:",e)}else{let e=document.getElementById("txHashDisplay");e&&M&&(e.style.display="block",e.innerHTML=`<strong>TX:</strong> ${q(M)}`)}let[k,$]=await (l=e=>{try{let t;t="string"==typeof e?JSON.parse(e):e,console.log("Received event:",t),function(e){let t=e.data||e,n=e.depth||0,o=e.reverted||!1,a={type:"unknown",depth:n,reverted:o,data:t,index:N.length};if(t.Call){let e=t.Call;if(a.type="call",n<=1&&!U&&(U=e.from),N.push(a),e.value&&"0"!==e.value&&"0x0"!==e.value){let t={type:"transfer",depth:n,reverted:o,data:{from:e.from,to:e.to,value:e.value},index:N.length};N.push(t)}j();return}if(t.Return)!1===t.Return.ok||o?a.type="revert":a.type="return";else if(t.Account){let e=t.Account;if(e.SetValue&&U&&e.SetValue.address===U){let t=BigInt(e.SetValue.val)-BigInt(e.SetValue.new);t>0n&&t.toString()}return}else if(t.Fee){let e=t.Fee;e.total&&e.total.toString();return}else if(t.Halt){let e=t.Halt;a.type="halt",a.data={...t,reason:"OutOfGas"===e?"OOG":"InvalidOpcode"===e?"InvalidOpcode":e}}else if(t.State)return L.push({depth:n,index:N.length,data:t.State});N.push(a),j()}(t)}catch(t){console.error("Error parsing event:",t,e)}},i=p(t,e.__wbindgen_malloc,e.__wbindgen_realloc),s=b,c=p(m,e.__wbindgen_malloc,e.__wbindgen_realloc),d=b,u=p(h,e.__wbindgen_malloc,e.__wbindgen_realloc),g=b,e.trace_transaction(i,s,c,d,u,g,l));P=JSON.parse($),!M&&k&&(M=k),j(),a.className="status",a.textContent=`Successfully traced transaction! Found ${N.length} events.`}catch(e){a.className="status error",a.textContent=`Error: ${e}`,console.error("Trace error:",e)}finally{r.disabled=!1;let e=document.getElementById("randomButton"),t=document.getElementById("rpcToggleButton");e&&(e.disabled=!1),t&&(t.disabled=!1)}},window.selectRandom=async function(){let t=document.getElementById("rpcUrl").value,n=document.getElementById("status"),o=document.getElementById("randomButton"),a=document.getElementById("blockNumber"),r=document.getElementById("txIndex");if(!t){n.className="status error",n.textContent="Please enter an RPC URL",n.style.display="block";return}try{let l,i;o.disabled=!0,n.className="status loading",n.textContent="Fetching latest blocks...",n.style.display="block",N=[],L=[],H={},D={},M=null,O=null,F=null,U=null,P=null;let s=document.getElementById("callStack");s&&(s.innerHTML="");let c=document.getElementById("txHashDisplay");c&&(c.style.display="none");let d=document.getElementById("txHashDisplay");d&&(d.style.display="none",d.innerHTML=""),await W();let u=await (l=p(t,e.__wbindgen_malloc,e.__wbindgen_realloc),i=b,e.get_latest_block_info(l,i)),g=JSON.parse(u),f=Math.floor(Number(g.blockNumber)),_=Math.max(0,f-20+1),w=Math.floor(Math.random()*Math.min(20,f+1)),y=_+w;n.textContent=`Checking block ${y}...`;let m=y,h=0,x=!1;for(let n=0;n<20;n++){let o=y-n;if(o<0)break;try{let n=await function(t,n){let o=p(t,e.__wbindgen_malloc,e.__wbindgen_realloc),a=b,r=p(n,e.__wbindgen_malloc,e.__wbindgen_realloc),l=b;return e.get_block_info(o,a,r,l)}(t,o.toString()),a=JSON.parse(n);if((h=Math.floor(Number(a.txCount)))>0){m=o,x=!0;break}}catch(e){continue}}if(!x||0===h){n.className="status error",n.textContent="No transactions found in recent blocks";return}let k=Math.floor(Math.random()*h);a.value=m.toString(),r.value=k.toString();try{M=await v(t,m.toString(),k.toString()),d&&M&&(d.style.display="block",d.innerHTML=`<strong>TX:</strong> ${q(M)}`)}catch(e){console.error("Failed to get transaction hash:",e)}n.className="status",n.textContent=`Selected block ${m}, transaction ${k} of ${h}`}catch(e){n.className="status error",n.textContent=`Error: ${e}`,console.error("Select random error:",e)}finally{o.disabled=!1}},document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("rpcUrl"),t=document.getElementById("rpcToggleButton"),n=document.getElementById("rpcUrlContainer"),o=document.getElementById("traceButton"),a=document.getElementById("randomButton");t?t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),console.log("RPC toggle button clicked"),n&&("none"===n.style.display||""===n.style.display?(n.style.display="block",setTimeout(()=>{e&&(e.focus(),e.select())},50)):n.style.display="none")}):console.error("rpcToggleButton not found"),o?o.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),console.log("Trace button clicked"),"function"==typeof window.traceTransaction?window.traceTransaction().catch(e=>{console.error("Error in traceTransaction:",e)}):console.error("window.traceTransaction is not a function:",typeof window.traceTransaction)}):console.error("traceButton not found"),a?a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),console.log("Random button clicked"),"function"==typeof window.selectRandom?window.selectRandom().catch(e=>{console.error("Error in selectRandom:",e)}):console.error("window.selectRandom is not a function:",typeof window.selectRandom)}):console.error("randomButton not found"),console.log("Button handlers attached. Functions available:",{traceTransaction:typeof window.traceTransaction,selectRandom:typeof window.selectRandom}),e&&e.addEventListener("keypress",function(e){"Enter"===e.key&&(this.blur(),n&&(n.style.display="none"))})}),W().catch(console.error);</script>



